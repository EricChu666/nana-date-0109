<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nana âœ¨ ä¸€æ•´å¤©çš„æµªæ¼«è¡Œç¨‹è¦åŠƒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-cream: #FDF8F3;
            --bg-rose: #FFF5F5;
            --accent-coral: #E8A598;
            --accent-deep: #C97B6B;
            --accent-gold: #D4A574;
            --text-dark: #3D3D3D;
            --text-muted: #6B6B6B;
            --card-bg: #FFFFFF;
            --shadow-soft: 0 4px 20px rgba(0,0,0,0.06);
            --shadow-hover: 0 8px 30px rgba(0,0,0,0.1);
            --gradient-romantic: linear-gradient(135deg, #FDF8F3 0%, #FFF5F5 50%, #F5F0FF 100%);
            --border-radius: 20px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--gradient-romantic);
            color: var(--text-dark);
            min-height: 100vh;
            line-height: 1.7;
        }

        .header {
            background: linear-gradient(180deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.8) 100%);
            backdrop-filter: blur(20px);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(232,165,152,0.2);
        }

        .header-content { max-width: 1200px; margin: 0 auto; }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--accent-deep);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .controls { display: flex; flex-wrap: wrap; gap: 1.5rem; align-items: center; }
        .control-group { display: flex; align-items: center; gap: 0.75rem; }
        .control-label { font-size: 0.9rem; color: var(--text-muted); font-weight: 500; }

        .toggle-container {
            display: flex;
            background: #F5F0ED;
            border-radius: 30px;
            padding: 4px;
            gap: 4px;
        }

        .toggle-btn {
            padding: 0.6rem 1.2rem;
            border: none;
            background: transparent;
            border-radius: 26px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-muted);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .toggle-btn.active {
            background: var(--card-bg);
            color: var(--accent-deep);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .toggle-btn:hover:not(.active) { color: var(--text-dark); }

        .rain-toggle { display: flex; align-items: center; gap: 0.5rem; margin-left: auto; }

        .rain-switch { position: relative; width: 50px; height: 28px; }
        .rain-switch input { opacity: 0; width: 0; height: 0; }

        .rain-slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background: #E8E4E0;
            border-radius: 28px;
            transition: 0.3s;
        }

        .rain-slider:before {
            position: absolute;
            content: "â˜€ï¸";
            font-size: 0.7rem;
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rain-switch input:checked + .rain-slider { background: #8FB8DE; }
        .rain-switch input:checked + .rain-slider:before { transform: translateX(22px); content: "ğŸŒ§ï¸"; }

        .hero { max-width: 1200px; margin: 0 auto; padding: 3rem 2rem; text-align: center; }
        .hero-date { font-family: 'Playfair Display', serif; font-size: 3rem; color: var(--accent-deep); margin-bottom: 0.5rem; }
        .hero-subtitle { font-size: 1.2rem; color: var(--text-muted); margin-bottom: 1rem; }
        .hero-summary { display: inline-flex; gap: 1rem; flex-wrap: wrap; justify-content: center; }
        .tag { background: rgba(232,165,152,0.15); color: var(--accent-deep); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; font-weight: 500; }

        .timeline { max-width: 900px; margin: 0 auto; padding: 0 2rem 4rem; position: relative; }
        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-coral) 0%, var(--accent-gold) 100%);
            opacity: 0.3;
        }

        @media (max-width: 768px) { .timeline::before { left: 30px; } }

        .timeline-item { position: relative; margin-bottom: 2rem; }
        .timeline-dot {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 16px;
            background: var(--accent-coral);
            border-radius: 50%;
            border: 3px solid var(--bg-cream);
            z-index: 2;
        }

        @media (max-width: 768px) { .timeline-dot { left: 30px; } }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.75rem;
            margin-left: calc(50% + 30px);
            box-shadow: var(--shadow-soft);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover { box-shadow: var(--shadow-hover); transform: translateY(-2px); }

        @media (max-width: 768px) { .card { margin-left: 60px; margin-right: 0; } }

        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
        .time-badge { background: linear-gradient(135deg, var(--accent-coral) 0%, var(--accent-gold) 100%); color: white; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        .category-badge { background: rgba(232,165,152,0.1); color: var(--accent-deep); padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; }

        .card-title { font-size: 1.4rem; font-weight: 600; color: var(--text-dark); margin-bottom: 0.5rem; }
        .card-reason { color: var(--text-muted); font-size: 0.95rem; margin-bottom: 1rem; line-height: 1.6; }
        .card-meta { display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-muted); }
        .meta-item { display: flex; align-items: center; gap: 0.4rem; }

        .location-options { margin: 1rem 0; }
        .location-option {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            background: #FAFAFA;
            border-radius: 12px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .location-option:hover { background: #F5F0ED; }
        .location-option.selected { border-color: var(--accent-coral); background: rgba(232,165,152,0.08); }
        .location-option input { display: none; }

        .location-radio {
            width: 18px;
            height: 18px;
            border: 2px solid #CCC;
            border-radius: 50%;
            margin-right: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .location-option.selected .location-radio { border-color: var(--accent-coral); }
        .location-option.selected .location-radio::after { content: ''; width: 10px; height: 10px; background: var(--accent-coral); border-radius: 50%; }

        .location-info { flex: 1; }
        .location-name { font-weight: 500; color: var(--text-dark); }
        .location-note { font-size: 0.85rem; color: var(--text-muted); }

        .card-actions { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #F0EEEC; }

        .action-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.5rem 1rem;
            border: 1px solid #E8E4E0;
            border-radius: 20px;
            background: white;
            color: var(--text-muted);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            font-family: inherit;
        }

        .action-btn:hover { border-color: var(--accent-coral); color: var(--accent-deep); background: rgba(232,165,152,0.05); }
        .action-btn.primary { background: var(--accent-coral); border-color: var(--accent-coral); color: white; }
        .action-btn.primary:hover { background: var(--accent-deep); border-color: var(--accent-deep); }

        .source-link { display: block; margin-top: 0.75rem; font-size: 0.8rem; color: var(--text-muted); }
        .source-link a { color: var(--accent-deep); text-decoration: none; }
        .source-link a:hover { text-decoration: underline; }

        .transport-card {
            background: linear-gradient(135deg, #F8F6F4 0%, #F5F3F0 100%);
            border-radius: 16px;
            padding: 1.25rem 1.5rem;
            margin: 1.5rem 0;
            margin-left: calc(50% + 30px);
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) { .transport-card { margin-left: 60px; } }

        .transport-icon { font-size: 1.5rem; }
        .transport-info { flex: 1; }
        .transport-title { font-weight: 500; color: var(--text-dark); font-size: 0.95rem; }
        .transport-detail { font-size: 0.85rem; color: var(--text-muted); }

        .transport-link {
            padding: 0.4rem 1rem;
            background: white;
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--accent-deep);
            text-decoration: none;
            border: 1px solid #E8E4E0;
            transition: all 0.2s ease;
        }

        .transport-link:hover { border-color: var(--accent-coral); background: rgba(232,165,152,0.05); }

        .bar-alternatives {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 1rem;
            border: 2px dashed rgba(232,165,152,0.3);
        }

        .bar-alt-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; font-weight: 500; color: var(--text-dark); }

        .bar-alt-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; }

        .bar-alt-option {
            padding: 1rem;
            background: #FAFAFA;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .bar-alt-option:hover { background: #F5F0ED; }
        .bar-alt-option.selected { border-color: var(--accent-coral); background: rgba(232,165,152,0.08); }
        .bar-alt-name { font-weight: 500; margin-bottom: 0.25rem; }
        .bar-alt-desc { font-size: 0.85rem; color: var(--text-muted); }

        .footer { text-align: center; padding: 3rem 2rem; color: var(--text-muted); font-size: 0.9rem; }
        .footer-note { background: rgba(232,165,152,0.1); padding: 1rem 1.5rem; border-radius: 12px; display: inline-block; margin-bottom: 1rem; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .timeline-item { animation: fadeIn 0.5s ease forwards; }

        @media (max-width: 480px) {
            .hero-date { font-size: 2rem; }
            .controls { flex-direction: column; align-items: stretch; }
            .control-group { justify-content: space-between; }
            .rain-toggle { margin-left: 0; justify-content: space-between; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo"><span>ğŸ’•</span> Nana</div>
            <div class="controls">
                <div class="control-group">
                    <span class="control-label">æ—¥æœŸ</span>
                    <div class="toggle-container" id="dateToggle">
                        <button class="toggle-btn active" data-date="0108">1/8 (å››)</button>
                        <button class="toggle-btn" data-date="0109">1/9 (äº”)</button>
                    </div>
                </div>
                <div class="control-group">
                    <span class="control-label">äº¤é€š</span>
                    <div class="toggle-container" id="transportToggle">
                        <button class="toggle-btn active" data-transport="public">ğŸš‡ ä¸é–‹è»Š</button>
                        <button class="toggle-btn" data-transport="car">ğŸš— é–‹è»Š</button>
                    </div>
                </div>
                <div class="rain-toggle">
                    <span class="control-label">é›¨å¤©æ¨¡å¼</span>
                    <label class="rain-switch">
                        <input type="checkbox" id="rainMode">
                        <span class="rain-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </header>

    <section class="hero">
        <h1 class="hero-date" id="heroDate">2026 / 01 / 08 (å››)</h1>
        <p class="hero-subtitle">å¾æ—©åˆé¤åˆ°å¾®é†ºå¤œæ™šï¼Œæ•´å¤©éƒ½æ˜¯æµªæ¼«æ™‚å…‰</p>
        <div class="hero-summary">
            <span class="tag">âœ¨ è¼•é¬†ç´„æœƒé¢¨</span>
            <span class="tag">ğŸ“¸ å¥½æ‹ç…§æ™¯é»</span>
            <span class="tag">ğŸƒ æ¸…æ·¡èˆ’é©é¤é»</span>
        </div>
    </section>

    <main class="timeline" id="timeline"></main>

    <footer class="footer">
        <div class="footer-note">âš ï¸ ç‡Ÿæ¥­æ™‚é–“å¯èƒ½èª¿æ•´ï¼Œå‡ºç™¼å‰å»ºè­°å†æ¬¡ç¢ºèªå„åº—å®¶è³‡è¨Š</div>
        <p>ç”¨å¿ƒè¦åŠƒçš„ä¸€å¤©ï¼Œé¡˜ä½ å€‘æœ‰å€‹ç¾å¥½ç´„æœƒ ğŸ’•</p>
    </footer>

    <script>
        const locations = {
            brunch: [
                {
                    id: "somebody",
                    name: "Somebody Cafe",
                    reason: "è¥¿é–€ç”ºæ£®æ—ç³»å’–å•¡å»³ï¼æ’ç•«å®¶é–‹çš„åº—ï¼Œæ»¿æ»¿ç¶ è‰²æ¤æ ½è¶…ç™‚ç™’ï¼Œæ—©åˆé¤çƒ˜è›‹è¶…æ¨è–¦",
                    address: "å°åŒ—å¸‚è¬è¯å€æˆéƒ½è·¯65è™Ÿ2æ¨“",
                    area: "è¥¿é–€ç«™",
                    mapsUrl: "https://maps.app.goo.gl/HD3MW8wnZSxxHTEA8",
                    note: "10:00-18:00ï¼Œç”¨é¤2å°æ™‚"
                },
                {
                    id: "w2cafe",
                    name: "W2 Cafe & Restaurant",
                    reason: "æ±Ÿå­ç¿ éŸ“ç³»ç´”ç™½å’–å•¡å»³ï¼ä¸é™æ™‚æœ‰æ’åº§ï¼Œå¹³åƒ¹ç‰¹é¤CPå€¼è¶…é«˜ï¼Œæ©Ÿå™¨äººé€é¤è¶…å¯æ„›",
                    address: "æ–°åŒ—å¸‚æ¿æ©‹å€é›™åè·¯ä¸‰æ®µ10å··24è™Ÿ1æ¨“",
                    area: "æ±Ÿå­ç¿ ç«™",
                    mapsUrl: "https://maps.app.goo.gl/jtzQpVLBYbP9qDU66",
                    note: "11:00-20:00ï¼Œé€±äºŒå…¬ä¼‘"
                },
                {
                    id: "muko",
                    name: "Muko Brunch",
                    reason: "æ±é–€ç«™äººæ°£ç¶²ç¾æ—©åˆé¤ï¼ç»ç’ƒå±‹æ¡å…‰è¶…ç¾ï¼Œè‡ªè£½å¸åº·å¿…é»ï¼Œé…ªæ¢¨æ§çš„å¤©å ‚",
                    address: "å°åŒ—å¸‚å¤§å®‰å€é‡‘è¯è¡—183å··8è™Ÿ",
                    area: "æ±é–€ç«™",
                    mapsUrl: "https://maps.app.goo.gl/BpYD4upfERXwpWLX7",
                    note: "09:00-17:00ï¼Œäººå¤šé™æ™‚90åˆ†é˜"
                }
            ],
            indoor: [
                {
                    id: "dreamplaza",
                    name: "Dream Plaza çµ±ä¸€ä¿¡ç¾©ç™¾è²¨",
                    reason: "2025æ–°é–‹å¹•ä¿¡ç¾©å€åœ°æ¨™ï¼å…¨å°æœ€å¤§æ˜Ÿå·´å…‹æ——è‰¦åº—ã€24å°æ™‚åšå®¢ä¾†æ›¸åº—ï¼Œè¶…å¥½é€›è¶…å¥½æ‹",
                    address: "å°åŒ—å¸‚ä¿¡ç¾©å€æ¾é«˜è·¯11è™Ÿ",
                    area: "å¸‚æ”¿åºœç«™",
                    mapsUrl: "https://www.google.com/maps/search/Dream+Plaza+çµ±ä¸€+ä¿¡ç¾©å€",
                    note: "é€±æ—¥è‡³é€±å›› 11:00-21:30ï¼Œé€±äº”å…­ 11:00-22:00"
                },
                {
                    id: "tfam",
                    name: "å°åŒ—å¸‚ç«‹ç¾è¡“é¤¨",
                    reason: "ç™½è‰²å»ºç¯‰æœ¬èº«å°±å¾ˆå¥½æ‹ï¼ç•¶æœŸå±•è¦½å¤šå…ƒï¼Œå®¤å…§å†·æ°£æ¶¼çˆ½ï¼Œé›¨å¤©ä¹Ÿèƒ½æ‚ é–’æ¬£è³è—è¡“",
                    address: "å°åŒ—å¸‚ä¸­å±±å€ä¸­å±±åŒ—è·¯ä¸‰æ®µ181è™Ÿ",
                    area: "åœ“å±±ç«™",
                    mapsUrl: "https://www.google.com/maps/search/å°åŒ—å¸‚ç«‹ç¾è¡“é¤¨",
                    note: "é€±ä¸€ä¼‘é¤¨ï¼Œé€±å››äº”æ­£å¸¸é–‹æ”¾ 09:30-17:30"
                }
            ],
            tea: [
                {
                    id: "migos",
                    name: "migo's cakesèœœè“æ‹¾ä¼æˆšé¢¨è›‹ç³•å°ˆé–€åº—",
                    reason: "èµ¤å³°è¡—è¶…äººæ°£æˆšé¢¨è›‹ç³•ï¼é¬†è»Ÿä¸ç”œè†©ï¼ŒèŠéº»ã€æŠ¹èŒ¶å£å‘³å¿…é»ï¼Œç’°å¢ƒæº«é¦¨å¯æ„›",
                    address: "å°åŒ—å¸‚å¤§åŒå€èµ¤å³°è¡—77å··3è™Ÿ",
                    area: "é›™é€£ç«™",
                    mapsUrl: "https://maps.app.goo.gl/fKBz6ormYH8STRV8A",
                    note: "å¹³æ—¥13:00-20:00ï¼Œå‡æ—¥12:00-20:30ï¼Œé€±ä¸‰å››å…¬ä¼‘"
                },
                {
                    id: "tzubi",
                    name: "Tzubi coffee",
                    reason: "ç‰¹è‰²å’–å•¡å»³ï¼Œé©åˆæ‚ é–’ä¸‹åˆèŒ¶æ™‚å…‰",
                    address: "å°åŒ—å¸‚",
                    area: "å¾…ç¢ºèª",
                    mapsUrl: "https://maps.app.goo.gl/ecivoHEcb4LfgzsC9",
                    note: "è«‹é»æ“Šåœ°åœ–æŸ¥çœ‹è©³æƒ…"
                },
                {
                    id: "pinede",
                    name: "PINEDEå½¼å…§æœµ å¸‚åºœåº—",
                    reason: "æ—¥æœ¬ä¾†çš„æ³•å¼ç”œé»ååº—ï¼åƒå±¤æ´¾è¶…ç¶“å…¸ï¼Œåº—å…§æ°›åœå„ªé›…é©åˆç´„æœƒ",
                    address: "å°åŒ—å¸‚ä¿¡ç¾©å€",
                    area: "å¸‚æ”¿åºœç«™",
                    mapsUrl: "https://maps.app.goo.gl/BR8tBRHrVNoNhk796",
                    note: "è«‹é»æ“Šåœ°åœ–æŸ¥çœ‹è©³æƒ…"
                },
                {
                    id: "letao",
                    name: "LeTAO Eslite Songyan Store",
                    reason: "åŒ—æµ·é“å°æ¨½ååº—ï¼é›™å±¤èµ·å¸è›‹ç³•è¶…æ¿ƒéƒï¼Œæ¾è¸åº—ç’°å¢ƒèˆ’é©",
                    address: "å°åŒ—å¸‚ä¿¡ç¾©å€è¸å» è·¯88è™Ÿ",
                    area: "å¸‚æ”¿åºœç«™",
                    mapsUrl: "https://maps.app.goo.gl/dNQMRhixRhEWK7ui9",
                    note: "11:00-22:00"
                }
            ],
            market: {
                sunny: [
                    {
                        id: "songyan",
                        name: "æ¾è¸æ–‡å‰µåœ’å€",
                        reason: "æ—¥å¼è€è¸å» é¢¨æ ¼ï¼Œç”Ÿæ…‹æ± ã€è€æ¨¹æ—è”­ï¼Œæ‚ é–’æ¼«æ­¥å¾ˆæµªæ¼«ï¼Œé‚„æœ‰èª å“ç”Ÿæ´»å¯é€›",
                        address: "å°åŒ—å¸‚ä¿¡ç¾©å€å…‰å¾©å—è·¯133è™Ÿ",
                        area: "å¸‚æ”¿åºœç«™",
                        mapsUrl: "https://maps.app.goo.gl/PZgdErNwEYKDuu1JA",
                        note: "åœ’å€æˆ¶å¤–å…¨å¤©é–‹æ”¾ï¼Œå®¤å…§å±•é¤¨æœ‰ç‡Ÿæ¥­æ™‚é–“"
                    },
                    {
                        id: "sisinancun",
                        name: "å››å››å—æ‘ç°¡å–®å¸‚é›†",
                        reason: "çœ·æ‘è€å±‹é…101å¤©éš›ç·šè¶…å¥½æ‹ï¼å‡æ—¥æœ‰æ–‡å‰µå¸‚é›†ï¼Œå¥½ä¸˜è²æœå¿…åƒ",
                        address: "å°åŒ—å¸‚ä¿¡ç¾©å€æ¾å‹¤è¡—50è™Ÿ",
                        area: "å°åŒ—101ç«™",
                        mapsUrl: "https://maps.app.goo.gl/ga6tG3vctkA5i2Pn8",
                        note: "é€±å…­æ—¥å¸‚é›† 13:00-19:00ï¼Œå¹³æ—¥ä¹Ÿæœ‰å¸¸æ…‹åº—å¯é€›"
                    },
                    {
                        id: "huashan",
                        name: "è¯å±±æ–‡å‰µåœ’å€",
                        reason: "è€é…’å» æ”¹å»ºçš„æ–‡å‰µåŸºåœ°ï¼Œé€±æœ«å¸¸æœ‰å¸‚é›†æ´»å‹•ï¼Œè€å»ºç¯‰é…ç¶ åœ°è¶…å¥½æ‹",
                        address: "å°åŒ—å¸‚ä¸­æ­£å€å…«å¾·è·¯ä¸€æ®µ1è™Ÿ",
                        area: "å¿ å­æ–°ç”Ÿç«™",
                        mapsUrl: "https://maps.app.goo.gl/GsFBTbeT5VJbLrap6",
                        note: "æˆ¶å¤–å…¨å¤©é–‹æ”¾ï¼Œå±•é¤¨ä¾æ´»å‹•è€Œå®š"
                    },
                    {
                        id: "gongguan",
                        name: "å…¬é¤¨å‰µæ„è·³èš¤å¸‚é›†",
                        reason: "é€±æœ«é™å®šçš„å‰µæ„å¸‚é›†ï¼æœ‰äºŒæ‰‹è¡£ã€å¤è‘—ã€æ‰‹ä½œå•†å“ï¼Œå¹´è¼•äººæŒ–å¯¶å¥½å»è™•",
                        address: "å°åŒ—å¸‚ä¸­æ­£å€æ€æºè¡—1è™Ÿï¼ˆæ±€å·è·¯ä¸‰æ®µäº¤å‰å£å»£å ´ï¼‰",
                        area: "å…¬é¤¨ç«™",
                        mapsUrl: "https://maps.app.goo.gl/tjpdd8Sg6mBGCJbz5",
                        note: "é€±å…­ 15:00-22:00ã€é€±æ—¥ 15:00-21:00"
                    }
                ],
                rainy: [
                    {
                        id: "zhongshan_underground",
                        name: "ä¸­å±±åœ°ä¸‹è¡—",
                        reason: "è¶…é•·åœ°ä¸‹é€›è¡—è–åœ°ï¼å¾ä¸­å±±ç«™åˆ°é›™é€£ç«™ï¼Œæ–‡é’å°åº—ã€æœé£¾ã€ç¾é£Ÿé€šé€šæœ‰ï¼Œé›¨å¤©é€›è¡—é¦–é¸",
                        address: "å°åŒ—å¸‚ä¸­å±±å€ä¸­å±±åœ°ä¸‹è¡—",
                        area: "ä¸­å±±ç«™",
                        mapsUrl: "https://www.google.com/maps/search/ä¸­å±±åœ°ä¸‹è¡—+å°åŒ—",
                        note: "11:00-21:30ï¼Œé€£æ¥æ·é‹ä¸­å±±ç«™èˆ‡é›™é€£ç«™"
                    },
                    {
                        id: "taipei_main_underground",
                        name: "åŒ—è»Šåœ°ä¸‹è¡—",
                        reason: "å°åŒ—æœ€å¤§åœ°ä¸‹å•†åœˆï¼Yå€ã€Kå€ã€Zå€å„æœ‰ç‰¹è‰²ï¼Œå¾å‹•æ¼«åˆ°æ½®ç‰Œæ‡‰æœ‰ç›¡æœ‰",
                        address: "å°åŒ—å¸‚ä¸­æ­£å€å°åŒ—è»Šç«™åœ°ä¸‹è¡—",
                        area: "å°åŒ—è»Šç«™",
                        mapsUrl: "https://www.google.com/maps/search/å°åŒ—è»Šç«™åœ°ä¸‹è¡—",
                        note: "11:00-21:30ï¼Œå¤šå€åŸŸå¯é€›ä¸€æ•´å¤©"
                    }
                ]
            },
            dinner: [
                {
                    id: "bokey",
                    name: "æ³¢è¨˜èŒ¶é¤å»³",
                    reason: "æ±å€20å¹´è€å­—è™Ÿæ¸¯å¼èŒ¶é¤å»³ï¼å¾©å¤æ¸¯é¢¨è£æ½¢è¶…æœ‰æ°›åœï¼Œçµ²è¥ªå¥¶èŒ¶ã€å†°ç«è è˜¿æ²¹å¿…é»",
                    address: "å°åŒ—å¸‚å¤§å®‰å€å»¶å‰è¡—70å··8è™Ÿ",
                    area: "å¿ å­æ•¦åŒ–ç«™",
                    mapsUrl: "https://maps.app.goo.gl/rAtsErimmhpjdoFW9",
                    note: "11:30-21:00ï¼Œå‡æ—¥å»ºè­°è¨‚ä½"
                },
                {
                    id: "kowloon",
                    name: "ç–é¾å†°å®¤",
                    reason: "æ¾è¸æ—çš„é“åœ°æ¸¯å¼èŒ¶é¤å»³ï¼æ‹›ç‰Œè˜¿è””ç³•è¶…é…¥è„†ï¼Œæ¥Šæç”˜éœ²å¿…å–ï¼Œå¾©å¤æ¸¯æ˜Ÿæµ·å ±è¶…å¥½æ‹",
                    address: "å°åŒ—å¸‚ä¿¡ç¾©å€å¿ å­æ±è·¯å››æ®µ553å··52å¼„5è™Ÿ1æ¨“",
                    area: "å¸‚æ”¿åºœç«™",
                    mapsUrl: "https://maps.app.goo.gl/JA1BpxeVH7sRbKKB8",
                    note: "å¹³æ—¥ 12:00-15:30, 17:00-21:00ï½œå‡æ—¥ 11:30-21:00"
                }
            ],
            bar: {
                main: {
                    id: "maji",
                    name: "åœ“å±± MAJI é›†é£Ÿè¡Œæ¨‚é…’å§å€",
                    reason: "è¢«ç¨±ç‚ºã€Œå°ç‰ˆè˜­æ¡‚åŠã€ï¼å¤šé–“é¢¨æ ¼é…’å§èšé›†ï¼Œæœ‰æ—¥ç³» HAKUã€ç†±å¸¶é¢¨ TIKIï¼Œæ°›åœæ­¡æ¨‚è¼•é¬†",
                    address: "å°åŒ—å¸‚ä¸­å±±å€ç‰é–€è¡—1è™Ÿ",
                    area: "åœ“å±±ç«™",
                    mapsUrl: "https://www.google.com/maps/search/MAJI+é›†é£Ÿè¡Œæ¨‚+åœ“å±±",
                    note: "é€±å››äº”æ™šé–“äººæ½®è¼ƒå¤šï¼Œå¯ä¸²å ´ä¸åŒé…’å§"
                },
                alternatives: [
                    {
                        id: "dadaocheng",
                        name: "å¤§ç¨»åŸ•ç¢¼é ­è²¨æ«ƒå¸‚é›†",
                        description: "æ²³å²¸å¾®é¢¨é…èª¿é…’ï¼Œå¤œæ™¯æµªæ¼«ï¼Œæœ‰é‡‘è‰²ä¸‰éº¥ã€å¾®é†ºç¢¼é ­ç­‰åº—å®¶",
                        address: "å°åŒ—å¸‚å¤§åŒå€æ°‘ç”Ÿè¥¿è·¯åº•ï¼ˆäº”è™Ÿæ°´é–€ï¼‰",
                        area: "åŒ—é–€ç«™",
                        mapsUrl: "https://www.google.com/maps/search/å¤§ç¨»åŸ•ç¢¼é ­è²¨æ«ƒå¸‚é›†",
                        note: "é€±å››äº”ç‡Ÿæ¥­è‡³22:00"
                    },
                    {
                        id: "caoshan",
                        name: "è‰å±±å¤œæœªçœ ",
                        description: "é™½æ˜å±±ç™¾è¬å¤œæ™¯ï¼æœ‰æ—‹è½‰æœ¨é¦¬ã€ç¾å ´æ­Œæ‰‹ï¼Œè¶…æµªæ¼«ç´„æœƒè–åœ°",
                        address: "å°åŒ—å¸‚å£«æ—å€æ±å±±è·¯25å··81å¼„99è™Ÿ",
                        area: "é™½æ˜å±±",
                        mapsUrl: "https://www.google.com/maps/search/è‰å±±å¤œæœªçœ ",
                        note: "å¹³æ—¥16:00-03:00ï¼Œä½æ¶ˆ300/äººï¼Œå»ºè­°é–‹è»Šæˆ–å«è»Š"
                    }
                ]
            }
        };

        function getTransportInfo(fromLocation, toLocation, transportMode) {
            const fromArea = fromLocation.area;
            const toArea = toLocation.area;
            const fromName = fromLocation.name.split(' ')[0];
            const toName = toLocation.name.split(' ')[0];
            
            const areaDistances = {
                "è¥¿é–€ç«™-å¸‚æ”¿åºœç«™": { public: 20, car: 18 },
                "è¥¿é–€ç«™-åœ“å±±ç«™": { public: 15, car: 12 },
                "æ±Ÿå­ç¿ ç«™-å¸‚æ”¿åºœç«™": { public: 25, car: 20 },
                "æ±Ÿå­ç¿ ç«™-åœ“å±±ç«™": { public: 30, car: 22 },
                "æ±é–€ç«™-å¸‚æ”¿åºœç«™": { public: 15, car: 12 },
                "æ±é–€ç«™-åœ“å±±ç«™": { public: 20, car: 15 },
                "å¸‚æ”¿åºœç«™-å¸‚æ”¿åºœç«™": { public: 5, car: 5 },
                "å¸‚æ”¿åºœç«™-é›™é€£ç«™": { public: 18, car: 15 },
                "å¸‚æ”¿åºœç«™-å°åŒ—101ç«™": { public: 5, car: 5 },
                "å¸‚æ”¿åºœç«™-å¿ å­æ–°ç”Ÿç«™": { public: 12, car: 10 },
                "å¸‚æ”¿åºœç«™-å…¬é¤¨ç«™": { public: 20, car: 15 },
                "å¸‚æ”¿åºœç«™-å¿ å­æ•¦åŒ–ç«™": { public: 8, car: 8 },
                "å¸‚æ”¿åºœç«™-åœ“å±±ç«™": { public: 25, car: 18 },
                "å¸‚æ”¿åºœç«™-ä¸­å±±ç«™": { public: 15, car: 12 },
                "å¸‚æ”¿åºœç«™-å°åŒ—è»Šç«™": { public: 12, car: 10 },
                "åœ“å±±ç«™-å¸‚æ”¿åºœç«™": { public: 25, car: 18 },
                "åœ“å±±ç«™-é›™é€£ç«™": { public: 5, car: 5 },
                "åœ“å±±ç«™-å°åŒ—101ç«™": { public: 20, car: 15 },
                "åœ“å±±ç«™-å¿ å­æ–°ç”Ÿç«™": { public: 15, car: 12 },
                "åœ“å±±ç«™-å…¬é¤¨ç«™": { public: 25, car: 20 },
                "åœ“å±±ç«™-å¿ å­æ•¦åŒ–ç«™": { public: 18, car: 15 },
                "åœ“å±±ç«™-åœ“å±±ç«™": { public: 5, car: 5 },
                "åœ“å±±ç«™-ä¸­å±±ç«™": { public: 8, car: 6 },
                "åœ“å±±ç«™-å°åŒ—è»Šç«™": { public: 10, car: 8 },
                "é›™é€£ç«™-å¸‚æ”¿åºœç«™": { public: 18, car: 15 },
                "é›™é€£ç«™-å°åŒ—101ç«™": { public: 15, car: 12 },
                "é›™é€£ç«™-å¿ å­æ•¦åŒ–ç«™": { public: 12, car: 10 },
                "é›™é€£ç«™-åœ“å±±ç«™": { public: 5, car: 5 },
                "å°åŒ—101ç«™-å¸‚æ”¿åºœç«™": { public: 5, car: 5 },
                "å°åŒ—101ç«™-å¿ å­æ•¦åŒ–ç«™": { public: 10, car: 8 },
                "å°åŒ—101ç«™-åœ“å±±ç«™": { public: 20, car: 15 },
                "å¿ å­æ–°ç”Ÿç«™-å¸‚æ”¿åºœç«™": { public: 12, car: 10 },
                "å¿ å­æ–°ç”Ÿç«™-å¿ å­æ•¦åŒ–ç«™": { public: 8, car: 8 },
                "å¿ å­æ–°ç”Ÿç«™-åœ“å±±ç«™": { public: 15, car: 12 },
                "å…¬é¤¨ç«™-å¸‚æ”¿åºœç«™": { public: 20, car: 15 },
                "å…¬é¤¨ç«™-å¿ å­æ•¦åŒ–ç«™": { public: 15, car: 12 },
                "å…¬é¤¨ç«™-åœ“å±±ç«™": { public: 25, car: 20 },
                "å¿ å­æ•¦åŒ–ç«™-å¸‚æ”¿åºœç«™": { public: 8, car: 8 },
                "å¿ å­æ•¦åŒ–ç«™-åœ“å±±ç«™": { public: 18, car: 15 },
                "ä¸­å±±ç«™-å¸‚æ”¿åºœç«™": { public: 15, car: 12 },
                "ä¸­å±±ç«™-å¿ å­æ•¦åŒ–ç«™": { public: 10, car: 8 },
                "ä¸­å±±ç«™-åœ“å±±ç«™": { public: 8, car: 6 },
                "å°åŒ—è»Šç«™-å¸‚æ”¿åºœç«™": { public: 12, car: 10 },
                "å°åŒ—è»Šç«™-å¿ å­æ•¦åŒ–ç«™": { public: 8, car: 8 },
                "å°åŒ—è»Šç«™-åœ“å±±ç«™": { public: 10, car: 8 },
                "å¾…ç¢ºèª-å¸‚æ”¿åºœç«™": { public: 15, car: 12 },
                "å¾…ç¢ºèª-åœ“å±±ç«™": { public: 15, car: 12 },
                "å¾…ç¢ºèª-å¿ å­æ•¦åŒ–ç«™": { public: 12, car: 10 },
            };

            const key1 = `${fromArea}-${toArea}`;
            const key2 = `${toArea}-${fromArea}`;
            let timeData = areaDistances[key1] || areaDistances[key2] || { public: 20, car: 15 };
            let time = timeData[transportMode === 'public' ? 'public' : 'car'];

            const parkingInfo = {
                "å¸‚æ”¿åºœç«™": "Dream Plaza / çµ±ä¸€æ™‚ä»£åœè»Šå ´",
                "åœ“å±±ç«™": "ç¾è¡“é¤¨åœ°ä¸‹åœè»Šå ´ / MAJIåœè»Šå ´",
                "å°åŒ—101ç«™": "å°åŒ—101åœè»Šå ´",
                "å¿ å­æ–°ç”Ÿç«™": "è¯å±±åœ’å€åœè»Šå ´",
                "å¿ å­æ•¦åŒ–ç«™": "SOGOåœè»Šå ´ / æ±å€è·¯é‚Šåœè»Š",
                "å…¬é¤¨ç«™": "å…¬é¤¨åœè»Šå ´",
                "é›™é€£ç«™": "é¦¬å•é†«é™¢åœè»Šå ´",
                "è¥¿é–€ç«™": "è¥¿é–€ç”ºåœè»Šå ´",
                "æ±Ÿå­ç¿ ç«™": "æ±Ÿç¿ åœ‹å°åœ°ä¸‹åœè»Šå ´",
                "æ±é–€ç«™": "æ°¸åº·è¡—å‘¨é‚Šåœè»Šå ´",
                "ä¸­å±±ç«™": "ä¸­å±±åœ°ä¸‹åœè»Šå ´",
                "å°åŒ—è»Šç«™": "å°åŒ—è»Šç«™åœ°ä¸‹åœè»Šå ´",
                "é™½æ˜å±±": "è‰å±±å¤œæœªçœ åœè»Šå ´",
            };

            let method, detail;
            if (transportMode === 'public') {
                if (fromArea === toArea) {
                    method = `ğŸš¶ æ­¥è¡Œå³å¯æŠµé”`;
                    time = 5;
                } else {
                    method = `ğŸš‡ æ­æ·é‹`;
                }
                detail = `ç´„ ${time} åˆ†é˜`;
            } else {
                method = `ğŸš— é–‹è»Š`;
                const parking = parkingInfo[toArea] || "å‘¨é‚Šæ”¶è²»åœè»Šå ´";
                detail = `ç´„ ${time} åˆ†é˜ | ğŸ…¿ï¸ ${parking}`;
            }

            const mapsUrl = `https://www.google.com/maps/dir/${encodeURIComponent(fromLocation.address)}/${encodeURIComponent(toLocation.address)}`;

            return { from: fromName, to: toName, method, detail, time: `ç´„ ${time} åˆ†é˜`, mapsUrl };
        }

        let currentDate = '0108';
        let currentTransport = 'public';
        let isRainMode = false;
        let selectedIndices = { brunch: 0, indoor: 0, tea: 0, market: 0, dinner: 0 };
        let selectedBarOption = 'main';

        function getSelectedLocation(category) {
            if (category === 'market') {
                const options = isRainMode ? locations.market.rainy : locations.market.sunny;
                return options[selectedIndices.market] || options[0];
            }
            if (category === 'bar') {
                if (selectedBarOption === 'main') return locations.bar.main;
                return locations.bar.alternatives.find(a => a.id === selectedBarOption) || locations.bar.main;
            }
            return locations[category][selectedIndices[category]] || locations[category][0];
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderTimeline();
            setupEventListeners();
        });

        function setupEventListeners() {
            document.querySelectorAll('#dateToggle .toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#dateToggle .toggle-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentDate = btn.dataset.date;
                    updateHeroDate();
                });
            });

            document.querySelectorAll('#transportToggle .toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#transportToggle .toggle-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentTransport = btn.dataset.transport;
                    renderTimeline();
                });
            });

            document.getElementById('rainMode').addEventListener('change', (e) => {
                isRainMode = e.target.checked;
                selectedIndices.market = 0;
                renderTimeline();
            });
        }

        function updateHeroDate() {
            document.getElementById('heroDate').textContent = currentDate === '0108' ? '2026 / 01 / 08 (å››)' : '2026 / 01 / 09 (äº”)';
        }

        function renderTimeline() {
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '';

            const brunchLoc = getSelectedLocation('brunch');
            const indoorLoc = getSelectedLocation('indoor');
            const teaLoc = getSelectedLocation('tea');
            const marketLoc = getSelectedLocation('market');
            const dinnerLoc = getSelectedLocation('dinner');
            const barLoc = getSelectedLocation('bar');

            timeline.appendChild(createTimelineItem('brunch', { category: "æ—©åˆé¤", time: "10:30 - 12:00", duration: "ç´„ 1.5 å°æ™‚" }, locations.brunch));
            timeline.appendChild(createTransportCard(brunchLoc, indoorLoc));
            timeline.appendChild(createTimelineItem('indoor', { category: "å®¤å…§æ™¯é» / é€›è¡—", time: "12:30 - 14:30", duration: "ç´„ 2 å°æ™‚" }, locations.indoor));
            timeline.appendChild(createTransportCard(indoorLoc, teaLoc));
            timeline.appendChild(createTimelineItem('tea', { category: "ä¸‹åˆèŒ¶/ç”œé»", time: "15:00 - 16:30", duration: "ç´„ 1.5 å°æ™‚" }, locations.tea));
            timeline.appendChild(createTransportCard(teaLoc, marketLoc));

            const marketOptions = isRainMode ? locations.market.rainy : locations.market.sunny;
            timeline.appendChild(createTimelineItem('market', { category: isRainMode ? "åœ°ä¸‹è¡—é€›é€›ï¼ˆé›¨å¤©ï¼‰" : "æ–‡å‰µå¸‚é›†", time: "16:30 - 18:00", duration: "ç´„ 1.5 å°æ™‚" }, marketOptions));

            timeline.appendChild(createTransportCard(marketLoc, dinnerLoc));
            timeline.appendChild(createTimelineItem('dinner', { category: "æ¸¯å¼æ™šé¤", time: "18:30 - 20:00", duration: "ç´„ 1.5 å°æ™‚" }, locations.dinner));
            timeline.appendChild(createTransportCard(dinnerLoc, barLoc));
            timeline.appendChild(createBarSection());
        }

        function createTimelineItem(key, meta, options) {
            const item = document.createElement('div');
            item.className = 'timeline-item';
            const selectedIndex = selectedIndices[key] || 0;
            const selectedOpt = options[selectedIndex] || options[0];

            let optionsHtml = options.map((opt, idx) => `
                <label class="location-option ${idx === selectedIndex ? 'selected' : ''}" data-key="${key}" data-index="${idx}">
                    <input type="radio" name="${key}" ${idx === selectedIndex ? 'checked' : ''}>
                    <div class="location-radio"></div>
                    <div class="location-info">
                        <div class="location-name">${opt.name}</div>
                        <div class="location-note">${opt.note}</div>
                    </div>
                </label>
            `).join('');

            item.innerHTML = `
                <div class="timeline-dot"></div>
                <div class="card">
                    <div class="card-header">
                        <span class="time-badge">${meta.time}</span>
                        <span class="category-badge">${meta.category}</span>
                    </div>
                    <h3 class="card-title">${selectedOpt.name}</h3>
                    <p class="card-reason">${selectedOpt.reason}</p>
                    <div class="card-meta">
                        <div class="meta-item"><span>â±ï¸</span><span>${meta.duration}</span></div>
                        <div class="meta-item"><span>ğŸ“</span><span>${selectedOpt.address}</span></div>
                    </div>
                    <div class="location-options">${optionsHtml}</div>
                    <div class="card-actions">
                        <a href="${selectedOpt.mapsUrl}" target="_blank" class="action-btn primary">ğŸ—ºï¸ çœ‹åœ°åœ–</a>
                    </div>
                    <p class="source-link">âš ï¸ ${selectedOpt.note}</p>
                </div>
            `;

            item.querySelectorAll('.location-option').forEach(opt => {
                opt.addEventListener('click', () => {
                    selectedIndices[opt.dataset.key] = parseInt(opt.dataset.index);
                    renderTimeline();
                });
            });

            return item;
        }

        function createTransportCard(fromLoc, toLoc) {
            const transport = getTransportInfo(fromLoc, toLoc, currentTransport);
            const card = document.createElement('div');
            card.className = 'transport-card';
            card.innerHTML = `
                <span class="transport-icon">${currentTransport === 'public' ? 'ğŸš‡' : 'ğŸš—'}</span>
                <div class="transport-info">
                    <div class="transport-title">${transport.from} â†’ ${transport.to}</div>
                    <div class="transport-detail">${transport.method} | ${transport.detail}</div>
                </div>
                <a href="${transport.mapsUrl}" target="_blank" class="transport-link">æŸ¥çœ‹è·¯ç·š</a>
            `;
            return card;
        }

        function createBarSection() {
            const data = locations.bar;
            const item = document.createElement('div');
            item.className = 'timeline-item';

            let currentBar = selectedBarOption === 'main' ? data.main : data.alternatives.find(a => a.id === selectedBarOption) || data.main;

            const altOptionsHtml = data.alternatives.map(alt => `
                <div class="bar-alt-option ${selectedBarOption === alt.id ? 'selected' : ''}" data-alt="${alt.id}">
                    <div class="bar-alt-name">${alt.name}</div>
                    <div class="bar-alt-desc">${alt.description}</div>
                </div>
            `).join('');

            item.innerHTML = `
                <div class="timeline-dot"></div>
                <div class="card">
                    <div class="card-header">
                        <span class="time-badge">20:30 - 22:30</span>
                        <span class="category-badge">å¾®é†ºæ™‚å…‰</span>
                    </div>
                    <h3 class="card-title">${currentBar.name}</h3>
                    <p class="card-reason">${currentBar.reason || currentBar.description}</p>
                    <div class="card-meta">
                        <div class="meta-item"><span>â±ï¸</span><span>ç´„ 2 å°æ™‚</span></div>
                        <div class="meta-item"><span>ğŸ“</span><span>${currentBar.address}</span></div>
                    </div>
                    <div class="card-actions">
                        <a href="${currentBar.mapsUrl}" target="_blank" class="action-btn primary">ğŸ—ºï¸ çœ‹åœ°åœ–</a>
                    </div>
                    <p class="source-link">âš ï¸ ${currentBar.note}</p>
                    <div class="bar-alternatives">
                        <div class="bar-alt-header">ğŸ’¡ ä¸€éµåˆ‡æ›å‚™é¸æ–¹æ¡ˆ</div>
                        <div class="bar-alt-options">
                            <div class="bar-alt-option ${selectedBarOption === 'main' ? 'selected' : ''}" data-alt="main">
                                <div class="bar-alt-name">ğŸª åœ“å±± MAJI é…’å§å€</div>
                                <div class="bar-alt-desc">å°ç‰ˆè˜­æ¡‚åŠï¼Œå¤šå…ƒé…’å§å¯ä¸²å ´</div>
                            </div>
                            ${altOptionsHtml}
                        </div>
                    </div>
                </div>
            `;

            item.querySelectorAll('.bar-alt-option').forEach(opt => {
                opt.addEventListener('click', () => {
                    selectedBarOption = opt.dataset.alt;
                    renderTimeline();
                });
            });

            return item;
        }
    </script>
</body>
</html>
